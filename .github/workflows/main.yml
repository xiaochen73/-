name: 每日更新养生内容

on:
  schedule:
    # 每天 UTC 时间 16:00 运行，即北京时间 00:00
    - cron: '0 16 * * *'
  workflow_dispatch: # 允许手动触发

jobs:
  generate-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: 检出代码
        uses: actions/checkout@v3

      - name: 设置Node.js环境
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: 运行AI脚本生成今日内容
        env:
          AI_API_KEY: ${{ secrets.AI_API_KEY }} # 从GitHub Secrets读取密钥
        run: |
          # 这里需要您编写或使用AI生成一个Node.js脚本（例如：generate-content.js）
          # 该脚本会调用AI API，生成JSON格式的养生知识和疾病应对内容
          # 然后，用生成的新内容去替换您网站HTML/JS文件中的对应部分
          # 例如：node scripts/generate-content.js
          echo "AI内容生成步骤 (需您补充具体脚本)"

      - name: 提交更新
        run: |
          git config --global user.name 'GitHub Actions Bot'
          git config --global user.email 'actions@github.com'
          git add .
          git commit -m "自动更新: $(TZ=Asia/Shanghai date +'%Y年%m月%d日') 的养生内容" || echo "没有内容变更，无需提交"
          git push
